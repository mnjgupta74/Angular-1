<div class="container-fluid">
    <mat-card>
        <!-- <h3>Account e-Ceiling</h3> -->
        <div class="d-flex flex-column flex-sm-column  flex-lg-row flex-md-row  justify-content-between mb-2">
                
            <span><span class="font-weight-bold"><strong> <h3>Account e-Ceiling</h3></strong> </span></span> 
            <h2 class="date-header "> 
                <mat-label class=" mt-1  "> <strong>Permission Date : </strong> </mat-label>  
                <span class="text"><strong> {{todayDate |date }} </strong></span>  </h2>
               </div>
       
       <!-- {{todayDate | date}} -->
        <form [formGroup]="EceilingForm"  autocomplete="off" >

            <div class="row ceiling-container">

                <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4">
                    <mat-form-field class="w-100" appearance="fill">
                        <mat-label for="permission">Set Permission</mat-label>
                        
                        <mat-select disableOptionCentering panelClass="myPanelClass" id="permission" name="mat-select-2" formControlName="permission" (selectionChange)="showfields()">
                            <mat-option value="1">Token Wise</mat-option>
                            <mat-option value="2">Bill Pass</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4">
                    <mat-form-field class="w-100" appearance="fill">
                        <mat-label for="EceilingType">Set E-ceiling type</mat-label>
                        <mat-select disableOptionCentering panelClass="myPanelClass" 
                            formControlName="EceilingType" name="EceilingType" (selectionChange)="onTypeSelected()">
                            <mat-option value="">Select</mat-option>
                            <mat-option value="1">Bill Type</mat-option>
                            <mat-option value="2">Budget Head</mat-option>
                            <mat-option value="3">Object Head</mat-option>
                            <mat-option value="4">PD Account</mat-option>
                     
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4 ">
                   
                   <!-- <h2 class="date-header"> 
                    <mat-label class=" mt-1  "> <strong>Permission Date : </strong> </mat-label>  
                    <span class="text"><strong> {{todayDate |date }} </strong></span>  </h2> -->
                </div>
                <div class="row" *ngIf="billTypeSelected">


 

                   <div>
                    <mat-radio-group>
                    <mat-radio-button color="primary"  value='1'  id="1" (click)="radioButtonChanged(1)">
                      Range 
                    </mat-radio-button> &nbsp; &nbsp;
                    <mat-radio-button color="primary" checked="true"   value='2' id="2" (click)="radioButtonChanged(2)"> 
                     Percentage
                    </mat-radio-button>
                  </mat-radio-group>
                   </div>
                   
           

                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="ishidden">
                        <div class="row">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6" >
                                <mat-form-field class="w-100">
                                    <mat-label for="startAmountRange">From Amount Range</mat-label>
                                    <input matInput placeholder="Amount Range" name="startAmountRange" formControlName="startAmountRange" (change)="startRangechange()" (keypress)="[startRangechange(),inputValidator($event)]">
                            
                                </mat-form-field>
                            </div>
                            
                                <div class="col-12 col-sm-6 col-md-6 col-lg-6" >
                                    <mat-form-field class="w-100">
                                        <mat-label for="amountRange">To Amount Range</mat-label>
                                        <input matInput placeholder="Amount Range" name="amountRange" formControlName="amountRange" (change)="endRangechange()" (keypress)="[endRangechange(),inputValidator($event)]" >
                                        <mat-error *ngIf="EceilingForm.invalid">This Range should be geater than from range amount</mat-error>
                                   
                                    </mat-form-field>
                                </div>
                      
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4"  *ngIf="!ishidden" >
                        <mat-form-field class="w-100">
                            <mat-label for="amountPercentage">Amount Percentage</mat-label>
                            <input matInput type="text" placeholder="Amount Percentage" name="amountPercentage"
                               
                                formControlName="amountPercentage" onlyNumber max="100" maxLength="3"
                                (focus)="myMethod()" (input)="handleChange($event)"   (keypress)="[inputValidator($event)]" (blur)="sign($event)">
                            <mat-error *ngIf="EceilingForm.invalid">Please Enter the value between 1 to 100 </mat-error>
                        </mat-form-field>
                    </div>
                    
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4">
                      
                        <div class="row">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6" >
                                <mat-form-field class="w-100" appearance="legacy">
                                    <mat-label for="fromDate" >Date From:</mat-label>
                                    <input matInput [matDatepicker]="fromDatepicker" name="fromDate" title="Date From"
                                        formControlName='fromDate'>
                                    <mat-datepicker-toggle  hidden="true"  matSuffix [for]="fromDatepicker"></mat-datepicker-toggle>
                                    <mat-datepicker hidden="true" #fromDatepicker (closed)="validateDates('fromDate')"></mat-datepicker>
                                    <mat-error *ngIf="EceilingForm.invalid">Please enter valid from date</mat-error>
                                </mat-form-field>
                            </div>


                            <div class="col-12 col-sm-6 col-md-6 col-lg-6">
                                <mat-form-field class="w-100" appearance="legacy">
                                    <mat-label for="toDate">To:</mat-label>
                                    <input matInput [matDatepicker]="picker2" name ="toDate" formControlName="toDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2 (closed)="validateDates('toDate')"></mat-datepicker>
                                    <mat-error *ngIf="EceilingForm.invalid">Please enter valid To date</mat-error>
                                </mat-form-field>
                            </div>

                        </div>
                    
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4">
                 
                    </div>
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="showBillType">
                     
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label for="billType">Set Bill Type</mat-label>
                            <input type="tel" placeholder="Select  Bill Type" aria-label="Number" matInput
                                (paste)="(false)" formControlName="billType" [matAutocomplete]="autoBillType"  />
                            <mat-icon style="position: absolute; right: 2px; top: 0px">arrow_drop_down
                            </mat-icon>
                            <mat-autocomplete #autoBillType="matAutocomplete" [displayWith]="displayBillType"    (closed)="onBillTypeSelected()">
                                <mat-option   *ngFor="let option of billTypelist | async" [value]="option">
                                    {{ option.BillType }}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="EceilingForm.invalid">Please select the Bill Type </mat-error>
                        </mat-form-field>
                    </div>
        
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="showBillType">
                        <mat-form-field class="w-100">
                            <mat-label>Set Sub Bill Type</mat-label>
                            <mat-select disableOptionCentering panelClass="myPanelClass" formControlName="subBillType">
                                <mat-option value="">select </mat-option>
                                <mat-option *ngFor="let option of subBillTypeData "
                                    [value]="option">{{option.SubType}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="showBudgetHead">
                        <mat-form-field class="w-100" appearance="legacy">
                            <!-- (keyup)="applyFilter($any($event.target).value)" -->
                            <mat-label>Select Budget Head</mat-label>
                            <input type="tel" placeholder="Select Budget Head" aria-label="Number" matInput
                                (paste)="(false)" formControlName="budgetHead" [matAutocomplete]="autoBudgetHead" (keyup)="applyFilter($any($event.target).value)">
                            <mat-icon style="position: absolute; right: 2px; top: 0px">arrow_drop_down
                            </mat-icon>
                            <mat-autocomplete #autoBudgetHead="matAutocomplete" [displayWith]="displayBudgetHead">
                                <mat-option *ngFor="let option of budgetHeadlist | async" [value]="option" (onSelectionChange)="applyFilter('')">
                                    {{ option.groupsubheadname }}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                    <!-- (onSelectionChange)="onBudgetHeadSelected($event)" -->
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="showObjectHead">
                        <mat-form-field class="w-100" appearance="legacy">

                            <input type="text" placeholder="Select Object Head" aria-label="Number" matInput
                                (paste)="(false)" formControlName="objectHead" [matAutocomplete]="auto2" >
                            <mat-icon class="" style=" position: absolute;right:2px; top:0px">arrow_drop_down
                            </mat-icon>
                            <mat-autocomplete #auto2="matAutocomplete" [displayWith]="objectDisplayFn">
                                <mat-option *ngFor="let option of objectHeadOptions | async" [value]="option">
                                    {{option.objectHeadCodeName}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="EceilingForm.invalid">Please select the Object Head </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4" *ngIf="showPdAccount">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Select Pd Account No</mat-label>
                            <input
                              type="tel"
                              placeholder="Select Pd Account No"
                              aria-label="Number"
                              matInput
                              (paste)="(false)"
                              formControlName="pdAccNo"
                              [matAutocomplete]="autoPdAccountNo"
                              
                            />
                            <!-- (click)="chechPdAccountList()" -->
                            <mat-icon style="position: absolute; right: 2px; top: 0px"
                              >arrow_drop_down
                            </mat-icon>
                            <mat-autocomplete
                              #autoPdAccountNo="matAutocomplete"
                              [displayWith]="displayPdAccountNo"
                            >
                              <mat-option
                                *ngFor="let option of PdAccountNolist | async"
                                [value]="option"
                              >
                                {{ option.PDAccName }}
                              </mat-option>
                            </mat-autocomplete>
                            <!-- <mat-error
                              *ngIf="
                              EceilingForm.get('pdAccNo').hasError('required') ||
                              EceilingForm.get('pdAccNo').touched
                              "
                            >
                              PD Account No is required
                            </mat-error> -->
                     
                      
                            <mat-error *ngIf="EceilingForm.invalid">Please select the PD Account No</mat-error>
                        </mat-form-field>
                    </div>
                
                    <div class="d-flex justify-content-end my-3">
                        <button type="button" mat-stroked-button color="primary" [disabled]="EceilingForm.invalid"
                            (click)="showAmtTypeRow()">Get details</button>
                            <!-- <button mat-stroked-button color="primary" class="ms-3" (click)="onReset()" type="button">Reset</button> -->
                    </div>

                </div>
            </div>




        </form>
    </mat-card>
</div>
<!-- <div  class="container-fluid mt-1">
    
    <div  class="row " *ngIf="  this.reportDetails">
        


        <div class=" w-100 text-center">

          
                <mat-expansion-panel routerLinkActive #rla2="routerLinkActive" [expanded]="rla2.isActive"
            class="side-bar-font">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <img src="./assets/images/Management_icon.svg">
                    <span class="ms-3 font-weight-bold"><strong>Record Details</strong> </span>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-nav-list>
                <div class=" example-container container-fluid scroll-container" style="overflow: auto">
                    <table width="100%" mat-table matTableExporter [dataSource]="RecordData" class="mat-elevation-z8"   matSort
                    
                      id="test" #test  
                     >
              
                      <ng-container matColumnDef="SrNo">
                        <th mat-header-cell *matHeaderCellDef class="OBListHdrFont text-center">
                          Sr No.
                        </th>
                        <td mat-cell *matCellDef="let item; let j = index"> {{ (j+1) +
                          (myPaginator.pageIndex * myPaginator.pageSize) }} </td>
                          <td mat-footer-cell *matFooterCellDef>Total </td>
                      </ng-container>
              
                      <ng-container matColumnDef="CDE_REFNO">
                        <th mat-header-cell mat-sort-header  *matHeaderCellDef class="OBListHdrFont text-center">
                            Code Ref. No.
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.CDE_REFNO}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="GrossAmt">
                        <th mat-header-cell mat-sort-header  *matHeaderCellDef  class="OBListHdrFont text-center">
                            Gross Amount
                        </th>
                        <td mat-cell *matCellDef="let element" class="text-center"> {{element.GrossAmt }} </td>
                        <td mat-footer-cell *matFooterCellDef>  {{calculateTotal() }} </td>
                      </ng-container>
              
              
                      <tr mat-header-row *matHeaderRowDef="displayedColumns,sticky: true"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                      <tr mat-footer-row *matFooterRowDef="displayedColumns, sticky: true"></tr>
                    </table>
                       <mat-paginator #myPaginator [hidden]="true"  #paginatorFirst [length]="2" [pageSize]="5" [pageSizeOptions]="[2,4,6,8]"  showFirstLastButtons>
      </mat-paginator>
                  </div>
            </mat-nav-list>
        </mat-expansion-panel>
       
          
           



        </div>
      
    </div>

</div> -->
<div class="container-fluid mt-1">
    <mat-card *ngIf="this.reportDetails">
        <div  class="row mb-3">
            <div class="col-12 col-sm-12 col-md-6 col-lg-3  text-center ">


                <mat-label class=" mt-2 "> <strong>Total Bills :</strong></mat-label>
                <p>{{ this.reportDetails?.TotalToken}}</p>


            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-3  text-center ">


                <mat-label class=" mt-2 "> <strong>Total Gross Amount :</strong></mat-label>
                <p>{{ this.reportDetails?.TotalGrossAmount | currency:'INR':'symbol-narrow':'4.2-2'}}</p>


            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-3  text-center ">


                <mat-label class=" mt-2 "> <strong>Total Net Amount :</strong></mat-label>
                <p>{{ this.reportDetails?.TotalNetAmount | currency:'INR':'symbol-narrow':'4.2-2'}}</p>


            </div>
            <div class="col-12 col-sm-12 col-md-6 col-lg-3 text-center ">


                <mat-label class=" mt-2 "> <strong>Total BT Amount :</strong></mat-label>
                <p>{{ this.reportDetails?.BtAmount | currency:'INR':'symbol-narrow':'0.2-2'}}</p>


            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-3 text-center ">

                <mat-label class=" mt-2 "> <strong>Permission Date :</strong></mat-label>
                <p>{{ this.reportDetails?.PermissionDate |date: 'dd/MM/yyyy'}}</p>

            </div>
            <div class="col-12 col-sm-6 col-md-6 col-lg-3    text-center ">

                <mat-label class=" mt-2 "> <strong>Latest Date :</strong> </mat-label>
                <p>{{ this.reportDetails?.LatestDate | date:'dd/MM/yyyy'}}</p>



            </div>

       
        </div>
 <!-- adjust the amount start -->

 <h2 class="mt-1 text-center">Set Transaction Limit</h2>
 <hr>
             <section style="height:inherit;">
                 <div class="row w-100 example-h2 ">
                     <div class="col-12 col-lg-6">
                         <div class="row">
                             <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
                                 <mat-form-field>
                                     <input type="number"  name="size" matInput style="font-weight: bold;" [(ngModel)]="gridsize"
                                         placeholder="Records in percent(%)" min="0" max="100"
                                         (input)="updateSetting(gridsize)" required>
                                 </mat-form-field>&nbsp;&nbsp;
                                 
                             </div>
                        
                             <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
                                 <mat-card-content class="custom-mat-slider">
                                     <label class="min" for="slider"> <b class="start"></b> </label>
                                     <mat-slider color="primary" [disabled]="disabled" [invert]="invert" [max]="max"
                                         [min]="min" [step]="step" [thumbLabel]="thumbLabel"
                                         [(ngModel)]="value" [value]="gridsize"
                                         name="slider"
                                         [vertical]="vertical" (change)="updateSetting($event.value)"
                                         class="w-75">
 
                                       
                                     </mat-slider>
                                     <label class="max"> <b class="end"></b> </label>
                                 </mat-card-content>
                             </div>
                         </div>
                     </div>
                     <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
                         <div class="row">
 
                             <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                                 <div class="d-inline-block">
                                     <label>Bill Count</label>
                                     <h1 style="font-weight: bold; text-align: center;">{{countToken}}</h1>
                                 </div>
                             </div>
 
                             <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                                 <div class="d-inline-block">
                                     <label>Gross Total</label>
                                     <h1 style="font-weight: bold; text-align: center;">{{totalAmount}}</h1>
                                 </div>
                             </div>
 
                             <div class="col-lg-4">
 
 
                             </div>
                         </div>
                     </div>
 
                 </div>
 
 
 
 
 
             </section>
         
         <!-- adjust the amount end -->
     
        <div class="d-flex justify-content-end my-2">
            <button type="submit" mat-raised-button color="primary"
                [disabled]="!submitted" (click)="setCappingList()">Submit</button>
        </div>
    </mat-card>

</div>
<!-- <div  class="container-fluid mt-1 ">
    
    <div  class="row "  >
        


        <div class=" w-100 text-center">

           
                <mat-expansion-panel routerLinkActive #rla2="routerLinkActive" [expanded]="rla2.isActive"
            class="side-bar-font" #panel1>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <img src="./assets/images/Management_icon.svg">
                    <span class="ms-3 font-weight-bold"><strong>Get Record Details</strong> </span>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-nav-list>
                
                   <div>
                        <form class=" " [formGroup]="RecordDateForm"  (ngSubmit)="getRecords()" autocomplete="off">
                            <div class="row   ">
                                <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                            <mat-form-field class="w-100" appearance="legacy">
                              
                                <mat-label for="fromDate" >Record Date:</mat-label>
                                <input matInput [matDatepicker]="RecordDatepicker"  [max]="maxDate" name="fromDate" title="Record Date"
                                    formControlName='recordDate'>
                                <mat-datepicker-toggle matSuffix [for]="RecordDatepicker"></mat-datepicker-toggle>
                                <mat-datepicker #RecordDatepicker ></mat-datepicker>
                                <mat-error *ngIf="RecordDateForm.invalid">Please enter valid Record date</mat-error>
                            </mat-form-field>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
                     
                                <mat-form-field class="w-100" appearance="legacy">
                                    <mat-label for="recBillType">Set Bill Type</mat-label>
                                    <input type="tel" placeholder="Select  Bill Type" aria-label="Number" matInput
                                        (paste)="(false)" formControlName="recBillType" [matAutocomplete]="autoRecBillType"  />
                                    <mat-icon style="position: absolute; right: 2px; top: 0px">arrow_drop_down
                                    </mat-icon>
                                    <mat-autocomplete #autoRecBillType="matAutocomplete" [displayWith]="displayBillType"    (closed)="onBillTypeSelected('recordDate')">
                                        <mat-option   *ngFor="let option of recBillTypelist | async" [value]="option">
                                            {{ option.BillType }}
                                        </mat-option>
                                    </mat-autocomplete>
                                 
                                </mat-form-field>
                            </div>
                
                            <div class="col-12 col-sm-6 col-md-6 col-lg-4" >
                                <mat-form-field class="w-100">
                                    <mat-label>Set Sub Bill Type</mat-label>
                                    <mat-select disableOptionCentering panelClass="myPanelClass" formControlName="recSubBillType">
                                        <mat-option value="">select </mat-option>
                                        <mat-option *ngFor="let option of recSubBillTypeData "
                                            [value]="option">{{option.SubType}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                          
                        </div>
                        <div class="row">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-4" >
                                <mat-form-field class="w-100" appearance="legacy">
                                >
                                    <mat-label>Select Budget Head</mat-label>
                                    <input type="tel" placeholder="Select Budget Head" aria-label="Number" matInput
                                        (paste)="(false)" formControlName="recBudgetHead" [matAutocomplete]="autoRecBudgetHead" (keyup)="applyFilter($any($event.target).value,'recorddate')">
                                    <mat-icon style="position: absolute; right: 2px; top: 0px">arrow_drop_down
                                    </mat-icon>
                                    <mat-autocomplete #autoRecBudgetHead="matAutocomplete" [displayWith]="displayBudgetHead">
                                        <mat-option *ngFor="let option of recBudgetHeadlist | async" [value]="option" >
                                            {{ option.groupsubheadname }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-4" >
                                <mat-form-field class="w-100" appearance="legacy">
        
                                    <input type="text" placeholder="Select Object Head" aria-label="Number" matInput
                                        (paste)="(false)" formControlName="recObjectHead" [matAutocomplete]="autoObject" >
                                    <mat-icon class="" style=" position: absolute;right:2px; top:0px">arrow_drop_down
                                    </mat-icon>
                                    <mat-autocomplete #autoObject="matAutocomplete" [displayWith]="objectDisplayFn">
                                        <mat-option *ngFor="let option of recObjectHeadOptions | async" [value]="option">
                                            {{option.objectHeadCodeName}}
                                        </mat-option>
                                    </mat-autocomplete>
                                  
                                </mat-form-field>
                            </div>
                       
                        </div>
                        <div class="d-flex justify-content-end my-3">
                            <button type="submit" class="px-2 float-start" mat-raised-button color="primary"
                            >Get Records</button>
                            </div>
                        </form>
                    </div>
                  
                <div class="  container-fluid scroll-container" style="overflow: auto"  >
                    <div class="d-flex justify-content-end my-3" *ngIf=" (this.RecordList.data.length >0) ||(this.refNoWiseData.data.length > 0) ">
                    <button mat-raised-button color="primary" (click)="exportToPdf()">
                        pdf </button>
                        </div>
                     
                    <div id="pdf" #pdf *ngIf="this.percentWiseData.data.length > 0" draggable="true" >
                  <h3><mat-label for="fromDate" >Percentage Wise ECS Permission</mat-label></h3>  
                  <div class="  container-fluid scroll-container" style="overflow: auto">
                    <app-table [id]="tablesDiv" [datasource]="percentWiseData" [columns]="displayedColumns2" [sticky]=true [Total]="['AMOUNT TOTAL']" [checkList]=false [pdfButton]=false></app-table>
                  </div>
                  </div>
                  <div  *ngIf="this.rangerWiseData.data.length > 0" >
                    <h3 class="mt-2"><mat-label for="fromDate" >Range Wise ECS Permission</mat-label> </h3>
                    <div class="  container-fluid scroll-container" style="overflow: auto">
                    <app-table [id]="table2" [datasource]="rangerWiseData" [columns]="displayedColumns3" [sticky]=true  [Total]="['AMOUNT TOTAL']" [checkList]=false  [pdfButton]=false></app-table> 
                  </div>
                  </div>

                  <div id="pdf" #pdf *ngIf="this.RecordList.data.length > 0" draggable="true" >
                    <h3 class="mt-2"><mat-label  for="fromDate" >CD Reference Number Wise ECS Permission</mat-label></h3>  
               
                    <app-table [id]="table4" [datasource]="RecordList" [detectChange]="change "  [columns]="displayedColumns1" [Total]="['AMOUNT']"  [sticky]=true   [checkList]=true  [sticky]=false [pdfButton]=false></app-table>
               
                    </div>
                    
                  <div  *ngIf="this.refNoWiseData.data.length > 0" >
                    <h3 class="mt-2"><mat-label for="fromDate" >File Uploaded ECS Permission</mat-label> </h3>
                    <div class="  container-fluid scroll-container" style="overflow: auto">
                    <app-table [id]="table3" [datasource]="refNoWiseData" [columns]="displayedColumns4" [sticky]=true  [Total]="['AMOUNT']"  [checkList]=true  [pdfButton]=false></app-table> 
                  </div>
                  </div>
                
                </div>
            </mat-nav-list>
        </mat-expansion-panel>
        
          
           



        </div>
      
    </div>

</div> -->
<div  class="container-fluid mt-1 mb-3">
    
    <div  class="row "  >
        


        <div class=" w-100 text-center">

            <!-- <div class="d-flex justify-content-end my-2"> -->
                <mat-expansion-panel routerLinkActive #rla2="routerLinkActive" [expanded]="rla2.isActive"
            class="side-bar-font">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <img src="./assets/images/Management_icon.svg">
                    <span class="ms-3 font-weight-bold"><strong>Referece No. Wise ECS Permission</strong> </span>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-nav-list>
                
                   <div>
                    
                        <div class="mt-2">

                          
                            <div class="row ceiling-container">
                                <!-- <h3>Upload Document</h3> -->
                                <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-6 d-flex flex-column gap-1">
                                    <mat-label class="fw-semibold">Choose File/ Attachment</mat-label>
                                    <div class="w-100" appDrapAndDrop >
                                        <label for="imageUpload" class="upload-lable-text btn w-100 " (drop)="uploadFile($event)"><mat-icon color="primary">cloud_upload</mat-icon><span class="file-browse mx-2 text-dark" >Drag & Drop or browse File</span></label>

                                                                   <input type='file' id="imageUpload" class="w-100 " #fileInput (change)="uploadFile($event)" hidden  />
                               
                                     </div>
                                 
                                </div>
                                <!-- <div class="col-12 col-sm-6 col-xl-4 d-flex flex-column gap-1">
                                    <mat-label class="fw-semibold">Choose File/ Attachment</mat-label>
                                    <div class="file-uploder-container d-flex flex-column mt-2">
                                        <div class="upload-lable-text btn py-2">
                
                                            <label *ngIf="!Disabledfile" for="inputGroupFile">Drag & drop or <span class="file-browse">
                                                browse</span></label>
                                
                                            <div *ngIf="Disabledfile" class="d-flex justify-content-between align-items-center">
                                                <a><span style="color:#3281CC;">{{Disabledfile}}</span></a>
                                                <mat-icon (click)="removeImage(0)" color="warn" class="fs-5">delete_forever</mat-icon>
                                            </div>
                
                                        </div>
                                
                                        <div class="input-group custom-file-button">
                                            <input type="file" class="form-control file-upload-input hidden" id="inputGroupFile" hidden
                                        multiple="true" (change)="uploadFile($event)" formControlName="file">
                                        </div>
                
                                    </div>
                                </div> -->
                                <div class="col-12 col-sm-6 col-md-6 col-lg-4 float-sm-right" >
                                    <!-- <button type="submit" class="mt-2 float-md-start float-sm-right" mat-raised-button color="primary" [disabled]="!(this.uploadedMedia.length > 0)"
                                     (click)="uploadCdrefList()">Upload Document</button> -->
                                </div>
                                <div class="col-12 col-sm-6 col-md-6 col-lg-4 float-start">
                                    
                                </div>
                                <div class="d-flex justify-content-between my-3">
                                <div class="media-upload-table-container" *ngIf="uploadedMedia.length > 0">
                                    <table class="media-upload-table table table-borderless">
                                      <thead>
                                        <tr>
                                          <th style="width: 246px"></th>
                                          <th class="media-progress-bar"></th>
                                          <th style="width: 100px;"></th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr *ngFor="let media of uploadedMedia; let i = index">
                                          <td>
                                            <div class="d-flex flex-row align-items-center">
                                              <!-- <div style="margin-right: 8px;">
                                                  <img  class="add-media-img" src="{{media.FileUrl}}">
                                                </div> -->
                                              <div class="media-file-name">
                                                <span style="word-wrap: break-word; white-space: pre-line">
                                                  {{ media.FileName }}
                                                </span>
                                              </div>
                                            </div>
                                          </td>
                                          <td style="vertical-align:middle;">
                                            <div class="d-flex flex-column" style="margin-top: 18px;">
                                              <div>
                                                <div class="first-progress">
                                                  <div
                                                    [ngStyle]="{ 'width.%': media.FileProgress }"
                                                    class="second-progress"
                                                  ></div>
                                                </div>
                                              </div>
                                              <div class="text-center">
                                                {{ media.FileProgessSize }} of {{ media.FileSize }}
                                              </div>
                                            </div>
                                          </td>
                                          <td style="vertical-align:middle;text-align: right;">
                                            <div class="media-upload-check">
                                              <span *ngIf="media.FileProgress === 100"> Completed</span>
                                            </div>
                                          </td>
                                          <td style="vertical-align:middle;">
                                            <a class="remove-media-txt" (click)="removeImage(i)"> Remove </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                  </div>
                                <div class="d-flex justify-content-end my-3">
                                    <!-- <button type="submit" mat-raised-button color="primary" (click)="uploadCdrefList()">Process Request</button> -->
                                    <button type="submit" class=" float-md-start float-sm-right" mat-raised-button color="primary" [disabled]="!(this.uploadedMedia.length > 0)"
                                        (click)="uploadCdrefList()">Upload Document</button>
                                </div>
                            </div>
                      

                            
                        </div>
                    </div>
                  
        
            </mat-nav-list>
      
        </mat-expansion-panel>
        </div>
      
    </div>

</div>


   <!-- // this template is invisible. It will be shown in the popup -->
   <ng-template #myTemplate>

    <div class="d-flex justify-content-end  align-items-center mb-1" mat-dialog-title cdkDrag
      cdkDragRootElement=".cdk-overlay-pane">
  
      <button mat-icon-button class="close-button" (click)="myDialogRef?.close()">
        <!-- <mat-icon class="close-icon">close</mat-icon> -->
        <img src="./assets/images/cross.svg" alt="">
      </button>
    </div>
    <div> <strong>Your File data Format is not valid ,It should be like This.</strong> </div>
    <img class="mt-1 popup" src="./assets/images/DEMOECSIMAGE.png" style="height: 450px;; width:500px">
    <!-- <button (click)="myDialogRef?.close()">this close button is optional</button> -->
  </ng-template>

<!-- loader start -->
<div *ngIf="this.loader.getLoading()" class="cssload-container">
    <div class="cssload-speeding-wheel"></div>
</div>
<!-- loader End -->