<div class="container-fluid" appNoRightClick>
    <div class="fieldset">
        <mat-card class="mb-3">
            <mat-label><b>Cheque Issue</b></mat-label>
            <form [formGroup]="checkIssueForm">
                <div class="row mt-4">


                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label> Treasury</mat-label>
                            <input type="text" placeholder="Pick one" aria-label="Number" matInput (paste)="(false)"
                                formControlName="TreasuryControl" [matAutocomplete]="autoTreas" [(ngModel)]="ChooseOption">
                            <mat-icon class="" style=" position: absolute;right:2px; top:0px">arrow_drop_down
                            </mat-icon>
                            <mat-autocomplete #autoTreas="matAutocomplete" [displayWith]="displayTreasFn">
                                <mat-option *ngFor="let option of Treasuryoptions | async" [value]="option">
                                    {{option.TreasuryName}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="checkIssueForm.invalid">Please Select Treasury ! </mat-error>
                        </mat-form-field>
                     </div>  
                   
                     <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label> Fin Year</mat-label>
                            <input type="text" placeholder="Pick one" aria-label="Number" matInput (paste)="(false)" formControlName="Year">
                       </mat-form-field>
                    </div>

                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Bank</mat-label>
                            <mat-select (selectionChange)="getChequeSer()" placeholder="Bank list" matInput
                                (paste)="(false)" formControlName="Banklist">
                                <mat-option *ngFor="let opt of BankList" [value]="opt.BankBranchCode">
                                    {{opt.BANKNAME}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div> -->

                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                      <mat-form-field class="w-100" appearance="legacy">
                          <mat-label>Select Bank</mat-label>
                          <input type="tel" placeholder="Pick one" aria-label="Number" matInput (paste)="(false)" formControlName="Banklist"  [matAutocomplete]="auto">
                          <mat-icon style="position: absolute; right:2px; top:0px">arrow_drop_down </mat-icon>
                          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayBankFn">
                              <mat-option *ngFor="let option of BankListoptions | async"  [value]="option" (click)="getChequeSer()">
                                  {{option.BANKNAME}}
                              </mat-option>
                          </mat-autocomplete>

                          <mat-error *ngIf="checkIssueForm.get('Banklist').hasError('required') || checkIssueForm.get('Banklist').touched">
                            Bank is required
                        </mat-error>

                      </mat-form-field>
                  </div>



                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>User</mat-label>
                            <mat-select (selectionChange)="getuserId()" placeholder="User list" matInput
                                (paste)="(false)" formControlName="UserList">
                                <mat-option *ngFor="let xyz of UserList" [value]="xyz.userid">
                                    {{xyz.employeeid}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div> -->

                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                      <mat-form-field class="w-100" appearance="legacy">
                          <mat-label>Select User</mat-label>
                          <input type="tel" placeholder="Pick one" aria-label="Number" matInput
                              (paste)="(false)" formControlName="UserList"
                              [matAutocomplete]="autos">
                          <mat-icon style="position: absolute; right:2px; top:0px">arrow_drop_down </mat-icon>
                          <mat-autocomplete #autos="matAutocomplete" [displayWith]="displayUserFn">
                              <mat-option *ngFor="let option of UserListoptions | async"  [value]="option" (click)="getuserId()">
                                  {{option.employeeid}}
                              </mat-option>
                          </mat-autocomplete>
                          <mat-error *ngIf="checkIssueForm.get('UserList').hasError('required') || checkIssueForm.get('UserList').touched">
                            User is required
                        </mat-error>
                      </mat-form-field>
                  </div>


                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>User</mat-label>
                                        <mat-select (selectionChange)="getuserId()" placeholder="User list"  matInput
                    (paste)="(false)" formControlName="UserList"
                    >
                    <mat-option *ngFor="let xyz of UserList" [value]="xyz.userid">
                        {{xyz.employeeid}}
                    </mat-option>
                </mat-select>


                                    </mat-form-field>

                                </div> -->
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4" aria-disabled="false">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Cheque Series</mat-label>
                            <mat-select (selectionChange)="getChequeSerChange($event)" placeholder="Cheque Serie"
                                matInput (paste)="(false)" formControlName="ChequeSeries">
                                <!-- <mat-option *ngFor="let abc of chequeserieslist"  [value]="abc.chequeseries"> -->
                                <mat-option *ngFor="let abc of chequeserieslist" [value]="abc">
                                    {{abc.chequeseries}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                                    <mat-form-field class="w-100" appearance="outline">
                                        <mat-label>Cheque Serie</mat-label>
                                        <mat-select (selectionChange)="getChequeSerChange($event)"
                                            placeholder="Cheque Serie" matInput (paste)="(false)"
                                            formControlName="ChequeSeries">
                                            <mat-option *ngFor="let abc of chequeserieslist" [value]="abc">
                                                {{abc.chequeseries}}
                                            </mat-option>
                                        </mat-select>


                                    </mat-form-field>

                                </div> -->

                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
            <mat-form-field class="w-100" appearance="outline">
                <mat-label>Cheque Series</mat-label>
                <input type="text" placeholder="Pick one" aria-label="Number" matInput
                    (paste)="(false)" formControlName="ChequeSeries"
                    [(ngModel)]="SelectMajorHead">
                <mat-icon class=""
                    style=" position: absolute;right:2px; top:0px">arrow_drop_down
                </mat-icon>
            </mat-form-field>

        </div> -->
                    <!-- <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4" >
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Cheque From</mat-label>
                            <input type="text" matInput formControlName="ChequeFrom">
                        </mat-form-field>
                    </div> -->

                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Cheque From</mat-label>
                            <input type="text" matInput formControlName="ChequeFrom"  placeholder="Valid till 6 digits only">
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">
                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Cheque To</mat-label>
                            <input type="text" matInput formControlName="ChequeTo" min="abc.ChequeFrom"  maxlength="6"  placeholder="Valid till 6 digits only"
                                max="abc.ChequeTo">
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4">

                        <mat-form-field class="w-100" appearance="legacy">
                            <mat-label>Running ChequeNo</mat-label>

                            <input matInput type="text" formControlName="RunningChequeNo" maxlength="6"  placeholder="Valid till 6 digits only"
                                [min]="checkIssueForm.ChequeFrom" [max]="checkIssueForm.ChequeTo" (paste)="(false)" >

                        </mat-form-field>
                    </div>

                    <div class="row mt-4">

                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12">
                        <div class="float-end">
                                <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!checkIssueForm.valid"   type="Submit" >Submit</button>
                                &nbsp;
                                <button  mat-stroked-button   color="primary"  mat-stroked-button color="primary" type="Reset" (click)="formReset()">Reset </button>
                            </div>
                        </div>
                    </div>

                </div>
            </form>

        </mat-card>

    </div>
</div>



        <div class="container-fluid" appNoRightClick *ngIf="showTab_Table">
            <mat-card class="mt-1">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-6 col-lg-4" >
                            <mat-form-field appearance="standard"  role="search" class="w-100">
                                <input matInput type="search" placeholder="Enter For Search"
                                    aria-label="Search" (keyup)="applyFilter($any($event.target).value)">
                                <mat-icon matSuffix>search</mat-icon>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

            <div class="scroll-container" style="overflow: auto">
                <table mat-table matSort matTableExporter [dataSource]="tablelist"
                    style="width:100%" (matSortChange)="announceSortChange($event)" matSort
                    class="mat-elevation-z8" id="test">


                    <ng-container matColumnDef="SrNo">
                        <th mat-header-cell *matHeaderCellDef   mat-sort-header
                            sortActionDescription="Sort by SrNo" class="OBListHdrFont">
                            SrNo
                        </th>
                        <td mat-cell *matCellDef="let item; let j = index"> {{ (j+1) +
                            (myPaginator.pageIndex * myPaginator.pageSize) }} </td>
                    </ng-container>

                    <ng-container matColumnDef="ChequeFrom">
                    <th mat-header-cell *matHeaderCellDef   mat-sort-header
                        sortActionDescription="Sort by ChequeFrom" class="OBListHdrFont">
                        Cheque From
                    </th>
                    <td mat-cell *matCellDef="let element"> {{element.ChequeFrom}}
                    </td>
                </ng-container>


                    <ng-container matColumnDef="ChequeTo">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by ChequeTo"
                            class="OBListHdrFont">
                            Cheque To
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.ChequeTo}} </td>
                    </ng-container>


                    <ng-container matColumnDef="ChequeInit">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by ChequeInit" class="OBListHdrFont">
                            Cheque Init
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.ChequeInit}} </td>
                    </ng-container>


                    <ng-container matColumnDef="IssuedID">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by IssuedID" class="OBListHdrFont">
                            Issued ID
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.IssuedID}} </td>
                    </ng-container>


                    <ng-container matColumnDef="EmployeeId">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by EmployeeId" class="OBListHdrFont">
                            Employee Id
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.EmployeeId}} </td>
                    </ng-container>

                    <ng-container matColumnDef="RunningChequeNo">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by RunningChequeNo" class="OBListHdrFont">
                            Running ChequeNo
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.RunningChequeNo}} </td>
                    </ng-container>

                    <ng-container matColumnDef="masterkey">
                        <th mat-header-cell *matHeaderCellDef  mat-sort-header
                            sortActionDescription="Sort by masterkey" class="OBListHdrFont">
                            Master Key
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.masterkey}} </td>
                    </ng-container>

                    <ng-container matColumnDef="empty-row">
                        <td mat-cell *matCellDef="let element">Data Not Found !</td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                </table>
            </div>

            <mat-paginator #myPaginator [length]="25" [pageSize]="5" [pageSizeOptions]="[5,10,15,20,25]" showFirstLastButtons>
            </mat-paginator>


            </mat-card>
        </div>


        <div *ngIf="this.loader.getLoading()" class="cssload-container">
            <div class="cssload-speeding-wheel"></div>
        </div>






