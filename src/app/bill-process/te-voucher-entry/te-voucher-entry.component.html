<div class="container-fluid">
  <mat-card class="mb-3" >
    <mat-label> <b>TE Voucher Entry</b></mat-label>

    <div class="col-md-12 col-12">
      <form
        [formGroup]="tEVoucherEntryForm"
        #options="ngForm"
        (ngSubmit)="tEVoucherEntrySubmit()"
      >
        <div class="row mt-4">
          <div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3">
              <!-- <mat-label class="mt-4">block Types </mat-label> -->


              <br/>
          <mat-radio-group aria-label="Select an option"
          formControlName='blockTypes' >
          <mat-radio-button class="medium-font me-3 w-40"  color="primary" value="1"> Main Block </mat-radio-button>
          <mat-radio-button class="medium-font"  color="primary"  value="2" >BT Block </mat-radio-button>
      </mat-radio-group>


      </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3">
            <mat-form-field appearance="legacy" class="legacy">
              <mat-label>Fin Year </mat-label>
              <mat-select   formControlName='finYear' >
                  <mat-option *ngFor="let year of YearLIst" [value]="year.finYear">{{year.finYear}}</mat-option>
              </mat-select>

              <mat-error
                *ngIf="
                tEVoucherEntryForm.get('finYear').hasError('required') ||
                tEVoucherEntryForm.get('finYear').touched
                "
              >
              Fin Year is required
              </mat-error>
          </mat-form-field>
        </div>




          <div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Select Major Head</mat-label>
              <input
                type="tel"
                placeholder="Select Major Head"
                aria-label="Number"
                matInput
                (paste)="(false)"
                formControlName="majorHead"
                [matAutocomplete]="auto"
              />
              <mat-icon style="position: absolute; right: 2px; top: 0px"
                >arrow_drop_down
              </mat-icon>
              <mat-autocomplete
                #auto="matAutocomplete"
                [displayWith]="displayMajorHead"
              >
                <mat-option
                  *ngFor="let option of majorHeadlist | async"
                  [value]="option"
                >
                  {{ option.majorheadname }}
                </mat-option>
              </mat-autocomplete>

              <mat-error
                *ngIf="
                tEVoucherEntryForm.get('majorHead').hasError('required') ||
                tEVoucherEntryForm.get('majorHead').touched
                "
              >
                Major Head is required
              </mat-error>
            </mat-form-field>
          </div>



          <div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3">
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label>Voucher No.</mat-label>

              <input
                matInput
                type="text"
                (input)="onInput($event)"
                placeholder="Enter Voucher No."
                name="Voucher Number"
                (paste)="(false)"
                formControlName="voucherNo"
                NumberOnlyDirective

              />
              <mat-error *ngIf="tEVoucherEntryForm.get('voucherNo').touched">


                <div
                  class="text-danger error_msg"
                  *ngIf="tEVoucherEntryForm.get('voucherNo').errors?.required"
                >
                  Please Enter Voucher Number
                </div>




                <div
                  class="text-danger error_msg"
                  *ngIf="tEVoucherEntryForm.get('voucherNo').errors?.pattern"
                >
                  Please Enter Numerical value
                </div>
              </mat-error>

            </mat-form-field>
          </div>
          <div
            class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12"
          >
            <div class="float-end">
              <button
                mat-raised-button
                color="primary"
                [disabled]="!options.valid"
                type="submit"
              >
                Submit
              </button>
              <button
                mat-stroked-button
                color="primary"
                class="ms-3"
                (click)="Reset()"

              >
                Reset
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </mat-card>

  <!-- <mat-card class="mb-3"  *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==1 && ! (tEVoucherEntryData.data.length> 0 )" >
    <div class="main-heading demo-2 mt-2"  >
     No Records Found !
       </div>
</mat-card> -->

  <mat-card class="mt-3" *ngIf="isShowGrnMinusEntryFormDetails" >



    <div class="container-fluid" *ngIf="tEVoucherEntryData.data.length> 0">
        <div class="row">
            <div class="col-12 col-sm-12 col-md-6 col-lg-4" >
                <mat-form-field appearance="standard"  role="search" class="w-100">
                    <input matInput type="search" placeholder="Enter For Search"
                        aria-label="Search" (keyup)="applyVoucherFilter($any($event.target).value)">
                    <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
            </div>
        </div>
    </div>
    <div class="scroll-container" style="overflow: auto">
        <table mat-table matSort matTableExporter [dataSource]="tEVoucherEntryData.data"
            style="width:100%" (matSortChange)="announceSortChange($event)" matSort
            class="mat-elevation-z8" id="test">




            <ng-container matColumnDef="SrNo" >
                <th mat-header-cell *matHeaderCellDef   mat-sort-header
                    sortActionDescription="Sort by SrNo" >

                </th>
                <td mat-cell *matCellDef="let item; let j = index" >

                   <a href="javascript: void(0);" (click)="selectTEVoucher(item)" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==2 && item.GrossAmt!==item.NetAmt"> Select </a>

                   <a href="javascript: void(0);" (click)="selectTEVoucher(item)" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==1"> Select </a> </td>
            </ng-container>

            <ng-container matColumnDef="VoucherNo">
            <th mat-header-cell *matHeaderCellDef   matSort mat-sort-header
                sortActionDescription="Sort by VoucherNo">
                Voucher No.
            </th>
            <td mat-cell *matCellDef="let element"> {{element.VoucherNo}}
            </td>
        </ng-container>

            <ng-container matColumnDef="VoucherDate">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by VoucherDate">
               Voucher Date
            </th>
            <td mat-cell *matCellDef="let element"> {{element.VoucherDate| date: 'dd/MM/yyyy' }}
            </td>
        </ng-container>

            <ng-container matColumnDef="OfficeID">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by OfficeID">
                Office ID
            </th>
            <td mat-cell *matCellDef="let element"> {{element.OfficeId}}
            </td>
        </ng-container>

            <ng-container matColumnDef="DDOCode">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by DDOCode">
                DDO Code
            </th>
            <td mat-cell *matCellDef="let element"> {{element.DDOCode}}
            </td>
        </ng-container>

            <ng-container matColumnDef="BudgetHead">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by BudgetHead">
                Budget Head
            </th>
            <td mat-cell *matCellDef="let element"> {{element.BudgetHead1}}
            </td>
        </ng-container>

            <ng-container matColumnDef="BillType">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by BillType">
                Bill Type
            </th>
            <td mat-cell *matCellDef="let element"> {{element.BillTypeName}}
            </td>
        </ng-container>

            <ng-container matColumnDef="ObjectHead">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by ObjectHead">
                Object Head
            </th>
            <td mat-cell *matCellDef="let element"> {{element.objecthead}}
            </td>
        </ng-container>

            <ng-container matColumnDef="PNP">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by PNP">
                PNP
            </th>
            <td mat-cell *matCellDef="let element"> {{element.PNP}}
            </td>
        </ng-container>

            <ng-container matColumnDef="VC">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by VC">
               V/C
            </th>
            <td mat-cell *matCellDef="let element"> {{element.VNC}}
            </td>
        </ng-container>

            <ng-container matColumnDef="NetAmount">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by NetAmount">
                Net Amount
            </th>
            <td mat-cell *matCellDef="let element"> {{element.NetAmt}}
            </td>
        </ng-container>

            <ng-container matColumnDef="GrossAmount">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by GrossAmount">
                Gross Amount
            </th>
            <td mat-cell *matCellDef="let element"> {{element.GrossAmt}}
            </td>
        </ng-container>

            <ng-container matColumnDef="PDAcNo">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by PDAcNo">
                PD A/c No.
            </th>
            <td mat-cell *matCellDef="let element"> {{element.PDAcno}}
            </td>
        </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>
    </div>

    <div class="main-heading demo-2 mt-2" *ngIf=" ! (tEVoucherEntryData.data.length> 0)"  >
      No Records Found !
        </div>

    <!-- <mat-paginator #myPaginatortEVoucher [length]="5" [pageSize]="5"
    [pageSizeOptions]="[5,10,15,20]" showFirstLastButtons>

</mat-paginator> -->

</mat-card>

<mat-card class="mt-3 mb-5" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==1 && isEditGrnMinusEntryFormDetails" >
  <div class="left-bill-entry-container">
    <div class="left-bill-entry-header pb-2">
      <div class="col-lg-7">
        <!-- <p class="m-0 d-inline f-14">
          GRN Number: <span class="medium-font"> </span>
        </p> -->
      </div>
    </div>
  </div>

  <div class="all-input-field-container mt-4">
    <div class="scrollable-height-container">
      <div class="basic-input-field-container">
        <form class="p-3" [formGroup]="GrnMinusEntryFormDetails" (ngSubmit)="grnMinusEntryFormSubmit()"  #optionsdata="ngForm">
          <div class="container-fluid">
            <div class="row">

              <!-- <input type="hidden" formControlName="GRN" placeholder=""/>
              <input type="hidden" formControlName="TreasuryCode" placeholder=""/> -->

              <input type="hidden" formControlName="TREASURY_REFNO" placeholder=""/>

              <div
                class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 col-xxl-4"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label class="custom-input-lable"
                    >TE Date </mat-label
                  >
                  <input
                    matInput
                    formControlName="TEDate"
                    [matDatepicker]="TEDatepick" [max]="maxDate"
                    placeholder="MM/DD/YYYY"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="TEDatepick"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #TEDatepick></mat-datepicker>
                </mat-form-field>

              <mat-error *ngIf="GrnMinusEntryFormDetails.get('TEDate').error || ( !GrnMinusEntryFormDetails.get('TEDate').valid && GrnMinusEntryFormDetails.get('TEDate').touched ) " > Date Required</mat-error>
              </div>

              <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
            >
              <mat-form-field appearance="legacy" class="w-100">
                <mat-label>DDO Code </mat-label>

                <input
                type="tel"
                placeholder="Select  DDO Code"
                aria-label="Number"
                matInput
                (paste)="(false)"
                formControlName="DDOCode"
                [matAutocomplete]="autoddo"
              />

              <mat-icon style="position: absolute; right: 2px; top: 0px"
              >arrow_drop_down
            </mat-icon>
            <mat-autocomplete
              #autoddo="matAutocomplete" (optionSelected)="getOfficeNameList()"
              [displayWith]="displayDdoName"
            >


                <!-- <mat-select  (selectionChange)="getOfficeNameList()"> -->
                  <mat-option
                    *ngFor="let option of DodoNameList | async"
                    [value]="option"
                    >{{ option.DDO_NAME }}</mat-option
                  >
                </mat-autocomplete>

                <!-- </mat-select> -->
                </mat-form-field>
            </div>



              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label class="custom-input-lable"
                    >Office Name </mat-label
                  >

                  <mat-select formControlName="OfficeName">
                    <mat-option
                      *ngFor="let option of OfficeNameListarr"
                      [value]="option.officeid"
                      >{{ option.OfficeName }}</mat-option
                    >
                  </mat-select>
                  <mat-error
                    *ngIf="GrnMinusEntryFormDetails.get('OfficeName').error || GrnMinusEntryFormDetails.get('OfficeName').invalid || GrnMinusEntryFormDetails.get('OfficeName').touched"
                   >

                   Office Name  Required
                </mat-error>

                </mat-form-field>
              </div>


          <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>Details Head </mat-label>
                  <input
                  matInput
                  formControlName="DetailsHead"
                  placeholder="Details Head" (keyup)="onKeyUpgetPdAccountList()"
                />

                <mat-error
                    *ngIf="GrnMinusEntryFormDetails.get('DetailsHead').error || GrnMinusEntryFormDetails.get('DetailsHead').invalid || GrnMinusEntryFormDetails.get('DetailsHead').touched"
                   >

                   Details Head  Required
                </mat-error>
                  <!-- <mat-select formControlName="DetailsHead">
                    <mat-option  *ngFor="let option of BudgetHeadData " value="{{option.code}}"
                      >{{option.groupsubheadname}}</mat-option
                    >
                  </mat-select> -->
                </mat-form-field>
              </div>

              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>Object Head</mat-label>
                  <mat-select formControlName="objectHead">
                    <mat-option
                    *ngFor="let option of ObjectHeadData"
                    [value]="option.objectHeadCode"
                    >{{ option.objectHeadCodeName }}</mat-option
                  >
                  </mat-select>
                </mat-form-field>
              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >

              <mat-card-title class="custom-input-lable w-100">SF / CA</mat-card-title>

                <mat-radio-group
                  aria-label="Select an option">
                  <input type="radio"  color="primary" value="P"  formControlName="PlanNonPlan"> State Fund
                  <input type="radio" color="primary" value="N" formControlName="PlanNonPlan"> Non Plan
                  <input type="radio" color="primary" value="C" formControlName="PlanNonPlan"> Central Assistance
                  <input type="radio" color="primary" value="A" formControlName="PlanNonPlan"> N.A.
                  </mat-radio-group>

              </div>
              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >
              <mat-card-title class="custom-input-lable w-100">Voted / Charged</mat-card-title>

                <mat-radio-group
                  aria-label="Select an option">
                  <input type="radio"  color="primary" value="V"  formControlName="VotedCharged"> Voted
                  <input type="radio" color="primary" value="C" formControlName="VotedCharged"> Charged
                  <input type="radio" color="primary" value="A" formControlName="VotedCharged"> N.A.
                </mat-radio-group>
              </div>


              <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
            >
              <mat-form-field appearance="legacy" class="w-100">
                <mat-label>PD A/c no </mat-label>
                <mat-select formControlName="pdacno">
                  <mat-option
                  *ngFor="let option of PdAccNameListarr"
                  [value]="option.PdAccNo"
                  >{{ option.PdAccName }}</mat-option
                >
                </mat-select>
              </mat-form-field>
            </div>




              <div
                class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label class="custom-input-lable"
                    >Gross Amount</mat-label
                  >
                  <input
                    matInput
                    formControlName="grossAmount"
                    placeholder="Gross Amount "
                  />
                </mat-form-field>
              </div>


              <div
              class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 col-xxl-4"
            >
              <mat-form-field appearance="legacy" class="w-100">
                <mat-label class="custom-input-lable"
                  >Amount</mat-label
                >
                <input
                  matInput
                  formControlName="Amount"
                  placeholder="Amount"
                />
              </mat-form-field>
            </div>



              <div
          class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12"
        >
          <div class="float-end">
            <button
              mat-raised-button
              color="primary"
              [disabled]="!optionsdata.valid"
              type="submit"
            >
              Submit
            </button>
            <!-- <button
              mat-stroked-button
              color="primary"
              class="ms-3"
              (click)="Reset()"
              type="submit"
            >
              Reset
            </button> -->
          </div>
        </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</mat-card>

<mat-card class="mt-3" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==1 && isEditGrnMinusEntryFormDetails" >
  <div class="container-fluid">
      <div class="row">
          <div class="col-12 col-sm-12 col-md-6 col-lg-4" >
              <mat-form-field appearance="standard"  role="search" class="w-100">
                  <input matInput type="search" placeholder="Enter For Search"
                      aria-label="Search" (keyup)="applyBudgetFilter($any($event.target).value)">
                  <mat-icon matSuffix>search</mat-icon>
              </mat-form-field>
          </div>
      </div>
  </div>
  <div class="scroll-container" style="overflow: auto">
      <table mat-table matSort matTableExporter [dataSource]="budgetDetailTEData"
          style="width:100%" (matSortChange)="announceSortChange($event)" matSort
          class="mat-elevation-z8" id="test">


          <ng-container matColumnDef="SrNo">
              <th mat-header-cell *matHeaderCellDef   mat-sort-header
                  sortActionDescription="Sort by SrNo" >

              </th>
              <td mat-cell *matCellDef="let item; let j = index"> <a href="javascript: void(0);" (click)="getDeletedSelection(item.sno)"> Delete </a> </td>
          </ng-container>





          <ng-container matColumnDef="OfficeID">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by OfficeID">
              Office ID
          </th>
          <td mat-cell *matCellDef="let element"> {{element.OfficeID}}
          </td>
      </ng-container>



          <ng-container matColumnDef="DetailsHead">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by DetailsHead">
              Details Head
          </th>
          <td mat-cell *matCellDef="let element"> {{element.BudgetHead}}
          </td>


      </ng-container>



          <ng-container matColumnDef="ObjectHead">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by ObjectHead">
              Object Head
          </th>
          <td mat-cell *matCellDef="let element"> {{element.ObjectHead}}
          </td>
      </ng-container>

          <ng-container matColumnDef="SFCA">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by SFCA">
              SF / CA
          </th>
          <td mat-cell *matCellDef="let element"> {{element.bfcType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="VotedCharged">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by VotedCharged">
              Voted / Charged
          </th>
          <td mat-cell *matCellDef="let element"> {{element.headType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by Amount">
              Net Amount
          </th>
          <td mat-cell *matCellDef="let element"> {{element.Amount}}
          </td>
      </ng-container>


  <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>

      </table>
  </div>

  <!-- <mat-paginator #myPaginator [length]="5" [pageSize]="5"
  [pageSizeOptions]="[5,10,15,20]" showFirstLastButtons>

</mat-paginator> -->

</mat-card>



<mat-card class="mt-3" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==2 && budgetDetailTEData.data.length>0"  >
  <div class="container-fluid">
      <div class="row">
          <div class="col-12 col-sm-12 col-md-6 col-lg-4" >
              <mat-form-field appearance="standard"  role="search" class="w-100">
                  <input matInput type="search" placeholder="Enter For Search"
                      aria-label="Search" (keyup)="applyBudgetFilter($any($event.target).value)">
                  <mat-icon matSuffix>search</mat-icon>
              </mat-form-field>
          </div>
      </div>
  </div>
  <div class="scroll-container" style="overflow: auto">
      <table mat-table matSort matTableExporter [dataSource]="budgetDetailTEData"
          style="width:100%" (matSortChange)="announceSortChange($event)" matSort
          class="mat-elevation-z8" id="test">


          <ng-container matColumnDef="SrNo">
              <th mat-header-cell *matHeaderCellDef   mat-sort-header
                  sortActionDescription="Sort by SrNo" >

              </th>
              <td mat-cell *matCellDef="let item; let j = index"> <a href="javascript: void(0);" (click)="fetchSelection(item)"> Select </a> </td>
          </ng-container>

          <ng-container matColumnDef="BudgetHead">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by BudgetHead">
                Budget Head
            </th>
            <td mat-cell *matCellDef="let element"> {{element.budgetHead}}
            </td>
        </ng-container>

        <ng-container matColumnDef="ObjectHead">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by ObjectHead">
              Object Head
          </th>
          <td mat-cell *matCellDef="let element"> {{element.objectHead}}
          </td>
      </ng-container>

          <ng-container matColumnDef="SFCA">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by SFCA">
              SF/CA
          </th>
          <td mat-cell *matCellDef="let element"> {{element.bfcType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="VotedCharged">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by VotedCharged">
              Voted/Charged
          </th>
          <td mat-cell *matCellDef="let element"> {{element.headType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by Amount">
              Amount
          </th>
          <td mat-cell *matCellDef="let element"> {{element.amount}}
          </td>
          </ng-container>


          <ng-container matColumnDef="PDAcNo">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by PDAcNo">
              PD A/c No.
          </th>
          <td mat-cell *matCellDef="let element"> {{element.pdAcNo}}
          </td>
      </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumnsBTType"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsBTType;"></tr>
</table>
  </div>
</mat-card>

<mat-card class="mt-3 mb-3" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==2 && budgetDetailTEData.data.length>0" >

  <div class="col-md-12 col-12">
    <form
      [formGroup]="BTTEVoucherEntry"
      #options="ngForm"
      (ngSubmit)="BTTEVoucherEntrySubmit()" #optionsdataBT="ngForm"
    >
      <div class="row mt-4">

        <input type="hidden"   formControlName="oldBudgetHead">
        <input type="hidden"   formControlName="oldpdacno">



        <mat-label class="text-end"> <h2>Main Amount : {{lblbttotal}} </h2> </mat-label>
<div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3">
  <mat-form-field class="w-100" appearance="legacy">
    <mat-label>Select Major Head</mat-label>
    <input
      type="tel"
      placeholder="Select Major Head"
      aria-label="Number"
      matInput
      (paste)="(false)"
      formControlName="MajorHead"
      [matAutocomplete]="auto" (ngModelChange)="fetchGroupSubHead()"
    />
    <mat-icon style="position: absolute; right: 2px; top: 0px"
      >arrow_drop_down
    </mat-icon>
    <mat-autocomplete
      #auto="matAutocomplete"
      [displayWith]="displayMajorHeadBT"
    >
      <mat-option
        *ngFor="let option of majorHeadlist | async"
        [value]="option"
      >
        {{ option.majorheadname }}
      </mat-option>
    </mat-autocomplete>

    <mat-error
      *ngIf="BTTEVoucherEntry.get('MajorHead').hasError('required') || BTTEVoucherEntry.get('MajorHead').touched">   Major Head is required  </mat-error>
  </mat-form-field>
</div>

<div
                class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>Detailed Head</mat-label>
                  <!-- <input
                  matInput
                  formControlName="DetailedHead"
                  placeholder="Detailed Head "
                /> -->

                <mat-select formControlName="DetailedHead" (ngModelChange)="trgGetObjectHeadCodelist()">
                  <mat-option value="" disabled>Select  Detailed Head </mat-option>
                    <mat-option  *ngFor="let option of BudgetHeadData" value="{{option.code}}"
                      >{{option.groupsubheadname}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="BTTEVoucherEntry.get('DetailedHead').hasError('required')  && BTTEVoucherEntry.get('DetailedHead').touched" >Detailed Head Required</mat-error>
                </mat-form-field>
              </div>


<div
                class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
              >
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>Object Head</mat-label>
                  <mat-select formControlName="ObjectHead">
                    <mat-option
                    *ngFor="let option of ObjectHeadData"
                    [value]="option.objectHeadCode"
                    >{{ option.objectHeadCodeName }}</mat-option
                  >
                  </mat-select>

                  <mat-error *ngIf="BTTEVoucherEntry.get('ObjectHead').error || BTTEVoucherEntry.get('ObjectHead').touched " > Object Head Required</mat-error>
                </mat-form-field>
              </div>

              <div
                  class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
                >
                  <mat-form-field appearance="legacy" class="w-100">
                    <mat-label>Division</mat-label>
                    <mat-select formControlName="Division"  (ngModelChange)="getDetailsHeadPdAccountList()">
                      <mat-option *ngFor="let option of DivisionData"  value="{{option.DivisionCode}}">{{option.DivisionName}}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="BTTEVoucherEntry.get('Division').error || BTTEVoucherEntry.get('Division').touched " > Div Code Required</mat-error>
                  </mat-form-field>
                </div>

                <div
                class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
              >

              <mat-card-title class="custom-input-lable w-100">SF / CA</mat-card-title>

                <mat-radio-group
                  aria-label="Select an option">
                  <input type="radio"  color="primary" value="P"  formControlName="PlanNonPlan"> State Fund
                  <input type="radio" color="primary" value="N" formControlName="PlanNonPlan"> Non Plan
                  <input type="radio" color="primary" value="C" formControlName="PlanNonPlan"> Central Assistance
                  <input type="radio" color="primary" value="A" formControlName="PlanNonPlan"> N.A.
                  </mat-radio-group>

              </div>

              <div
                  class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
                >
                  <mat-form-field appearance="legacy" class="w-100">
                    <mat-label>PD A/C No.</mat-label>
                    <mat-select formControlName="PDACNO">
                      <mat-option *ngFor="let option of PdAccNameListarr"  value="{{option.PdAccNo}}">{{option.PdAccName}}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="BTTEVoucherEntry.get('PDACNO').error || BTTEVoucherEntry.get('PDACNO').touched " >PD A/C No  Required</mat-error>
                  </mat-form-field>
                </div>

                <div
                class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
              >
              <mat-card-title class="custom-input-lable w-100">Voted / Charged</mat-card-title>

                <mat-radio-group
                  aria-label="Select an option">
                  <input type="radio"  color="primary" value="V"  formControlName="VotedCharged"> Voted
                  <input type="radio" color="primary" value="C" formControlName="VotedCharged"> Charged
                  <input type="radio" color="primary" value="A" formControlName="VotedCharged"> N.A.
                </mat-radio-group>
              </div>

              <div
              class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
            >
              <mat-form-field appearance="legacy" class="w-100">
                <mat-label class="custom-input-lable"
                  > Amount</mat-label
                >
                <input
                  matInput
                  formControlName="Amount"
                  placeholder="Amount "
                />
                <mat-error *ngIf="BTTEVoucherEntry.get('Amount').error || BTTEVoucherEntry.get('Amount').touched " > Amount Required</mat-error>
              </mat-form-field>
            </div>

            <div
            class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3"
          >
            <mat-form-field appearance="legacy" class="w-100">
              <mat-label class="custom-input-lable"
                >TE Date </mat-label
              >
              <input
                matInput
                formControlName="TEDate"
                [matDatepicker]="TEDatepick" [max]="maxDate"
                placeholder="MM/DD/YYYY"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="TEDatepick"
              ></mat-datepicker-toggle>
              <mat-datepicker #TEDatepick></mat-datepicker>
            </mat-form-field>

          <mat-error *ngIf="BTTEVoucherEntry.get('TEDate').error || ( !BTTEVoucherEntry.get('TEDate').valid && BTTEVoucherEntry.get('TEDate').touched ) " > Date Required</mat-error>
          </div>

          <div class="col-12 col-sm-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3" >

              <button
                mat-raised-button
                color="primary"
                [disabled]="!addNewBTDetail && !optionsdataBT.valid "
                type="submit"
              >
                Add New BT Detail
              </button>


            </div>




          <!-- <div
          class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12"
        >
          <div class="float-end">
            <button
              mat-raised-button
              color="primary"
              [disabled]="!optionsdataBT.valid"
              type="submit"
            >
              Submit
            </button>
            <button
              mat-stroked-button
              color="primary"
              class="ms-3"
              (click)="Reset()"
              type="submit"
            >
              Reset
            </button>
          </div>
        </div> -->





</div>
</form>
</div>
</mat-card>

<mat-card class="mt-3" *ngIf="tEVoucherEntryForm.getRawValue().blockTypes==2 && budgetDetailTEData.data.length>0 " >
  <div class="container-fluid">
      <div class="row">
          <div class="col-12 col-sm-12 col-md-6 col-lg-4" >
              <mat-form-field appearance="standard"  role="search" class="w-100">
                  <input matInput type="search" placeholder="Enter For Search"
                      aria-label="Search" (keyup)="applyTempFilter($any($event.target).value)">
                  <mat-icon matSuffix>search</mat-icon>
              </mat-form-field>
          </div>
      </div>
  </div>
  <div class="scroll-container" style="overflow: auto">
      <table mat-table matSort matTableExporter [dataSource]="tempArray"
          style="width:100%" (matSortChange)="announceSortChange($event)" matSort
          class="mat-elevation-z8" id="test">


          <ng-container matColumnDef="SrNo">
              <th mat-header-cell *matHeaderCellDef   mat-sort-header
                  sortActionDescription="Sort by SrNo" >

              </th>
              <td mat-cell *matCellDef="let item; let j = index"><a href="javascript: void(0);" (click)="tempRecordRemove(j)"> Deleted </a>   </td>
          </ng-container>

          <ng-container matColumnDef="BudgetHead">
            <th mat-header-cell *matHeaderCellDef   mat-sort-header
                sortActionDescription="Sort by BudgetHead">
                Budget Head
            </th>
            <td mat-cell *matCellDef="let element"> {{element.budgetHead}}
            </td>
        </ng-container>

        <ng-container matColumnDef="ObjectHead">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by ObjectHead">
              Object Head
          </th>
          <td mat-cell *matCellDef="let element"> {{element.objectHead}}
          </td>
      </ng-container>

          <ng-container matColumnDef="SFCA">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by SFCA">
              SF/CA
          </th>
          <td mat-cell *matCellDef="let element"> {{element.headType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="VotedCharged">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by VotedCharged">
              Voted/Charged
          </th>
          <td mat-cell *matCellDef="let element"> {{element.bfcType}}
          </td>
      </ng-container>

          <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by Amount">
              Amount
          </th>
          <td mat-cell *matCellDef="let element"> {{element.amount}}
          </td>
          </ng-container>


          <ng-container matColumnDef="PDAcNo">
          <th mat-header-cell *matHeaderCellDef   mat-sort-header
              sortActionDescription="Sort by PDAcNo">
              PD A/c No.
          </th>
          <td mat-cell *matCellDef="let element"> {{element.pdaAcNo}}
          </td>
      </ng-container>


      <ng-container matColumnDef="oldPDAcNo">
        <th mat-header-cell *matHeaderCellDef   mat-sort-header
            sortActionDescription="Sort by oldPDAcNo">
            Old PDAc No.
        </th>
        <td mat-cell *matCellDef="let element"> {{element.oldpdacno}}
        </td>
    </ng-container>

    <ng-container matColumnDef="OldBudgetHead">
      <th mat-header-cell *matHeaderCellDef   mat-sort-header
          sortActionDescription="Sort by OldBudgetHead">
          Old Budget Head
      </th>
      <td mat-cell *matCellDef="let element"> {{element.oldBudgetHead}}
      </td>
  </ng-container>



  <tr mat-header-row *matHeaderRowDef="displayedColumnsBTTypeOld"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsBTTypeOld;"></tr>
</table>




<div class="row mt-3" *ngIf="tempArray.data.length>0">
  <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12" >
    <button    mat-raised-button      color="primary"  (click)="voucherBookEntery()"  type="submit" >
               Submit
    </button>
   </div>
</div>



  </div>




</mat-card>
</div>

<div *ngIf="this.loader.getLoading()" class="cssload-container">
  <div class="cssload-speeding-wheel"></div>
</div>

